{"ast":null,"code":"import _slicedToArray from \"/home/maga/Desktop/hackatone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/maga/Desktop/hackatone/src/components/Cocina/order-card.js\";\nimport React, { useState, useEffect } from 'react';\nimport ProductList from './product-list';\nimport putOrders from '../../controller/orders/status';\nimport deleteOrder from '../../controller/orders/delete';\n\nconst OrderCard = ({\n  order\n}) => {\n  const fecha = new Date(order.dateEntry);\n  const fechaFinal = new Date(order.dateProcessed);\n  const productsArr = order.products;\n\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        active = _useState2[0],\n        setActive = _useState2[1];\n\n  const _useState3 = useState((Date.now() - fecha.getTime()) / 1000),\n        _useState4 = _slicedToArray(_useState3, 2),\n        timer = _useState4[0],\n        setTimer = _useState4[1];\n\n  const finalTime = (fechaFinal.getTime() - fecha.getTime()) / 1000;\n\n  const changeStatus = e => {\n    putOrders(order.client, order.products, localStorage.getItem('token'), order.userId, e.target.value, order._id).then(console.log); // deleteOrder(localStorage.getItem('token'), order._id)\n    //   .then(console.log)\n  };\n\n  useEffect(() => {\n    let interval = null;\n\n    if (order.status === 'delivered') {\n      setActive(false);\n    }\n\n    if (active) {\n      interval = setInterval(() => {\n        setTimer(timer + 1);\n      }, 1000);\n    }\n\n    return () => clearInterval(interval);\n  }, [active, timer]);\n  return React.createElement(\"div\", {\n    \"data-testid\": order._id,\n    className: \"col-sm-6 mt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-header d-flex justify-content-between align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"d-flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    \"data-testid\": order.client,\n    className: \"border-card-right pr-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \"Cliente: \", order.client)), active === true && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, Math.floor(timer.toFixed() / 60) % 60, \":\", timer.toFixed() % 60), active === false && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, Math.floor(finalTime.toFixed() / 60) % 60, \":\", finalTime.toFixed() % 60)), React.createElement(\"div\", {\n    className: \"card-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, productsArr && productsArr.map(el => {\n    return React.createElement(ProductList, {\n      el: el,\n      key: el.product.productId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    });\n  }))), React.createElement(\"div\", {\n    className: \"input-group card-footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    \"data-testid\": \"name-\".concat(order.client),\n    onChange: changeStatus,\n    value: order.status,\n    className: \"custom-select\",\n    id: \"inputGroupSelect02\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"pending\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Pending\"), React.createElement(\"option\", {\n    value: \"canceled\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Canceled\"), React.createElement(\"option\", {\n    \"data-testid\": \"delivering-\".concat(order.client),\n    value: \"delivering\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Delivering\"), React.createElement(\"option\", {\n    \"data-testid\": \"delivered-\".concat(order.client),\n    value: \"delivered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Delivered\")), React.createElement(\"div\", {\n    className: \"input-group-append\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"input-group-text\",\n    htmlFor: \"inputGroupSelect02\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Status\")))));\n};\n\nexport default OrderCard;","map":{"version":3,"sources":["/home/maga/Desktop/hackatone/src/components/Cocina/order-card.js"],"names":["React","useState","useEffect","ProductList","putOrders","deleteOrder","OrderCard","order","fecha","Date","dateEntry","fechaFinal","dateProcessed","productsArr","products","active","setActive","now","getTime","timer","setTimer","finalTime","changeStatus","e","client","localStorage","getItem","userId","target","value","_id","then","console","log","interval","status","setInterval","clearInterval","Math","floor","toFixed","map","el","product","productId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ProductList from './product-list';\nimport putOrders from '../../controller/orders/status'\nimport deleteOrder from '../../controller/orders/delete';\n\nconst OrderCard = ({ order }) => {\n  const fecha = new Date(order.dateEntry)\n  const fechaFinal = new Date(order.dateProcessed)\n  const productsArr = order.products\n  const [active, setActive] = useState(true)\n  const [timer, setTimer] = useState((Date.now() - fecha.getTime()) / 1000)\n  const finalTime = (fechaFinal.getTime() - fecha.getTime()) / 1000;\n\n  const changeStatus = (e) => {\n    putOrders(order.client, order.products, localStorage.getItem('token'), order.userId, e.target.value, order._id)\n      .then(console.log)\n    // deleteOrder(localStorage.getItem('token'), order._id)\n    //   .then(console.log)\n  }\n\n  useEffect(() => {\n    let interval = null;\n\n    if (order.status === 'delivered') {\n      setActive(false)\n    }\n    if (active) {\n      interval = setInterval(() => {\n        setTimer(timer + 1)\n      }, 1000)\n    }\n    return () => clearInterval(interval)\n  }, [active, timer])\n\n  return (\n    <div data-testid={order._id} className=\"col-sm-6 mt-3\">\n      <div className=\"card\" >\n        <div className=\"card-header d-flex justify-content-between align-items-center\">\n          <div className=\"d-flex\">\n            <div data-testid={order.client} className=\"border-card-right pr-2\">Cliente: {order.client}</div>\n            {/* <div className=\"pl-2\"></div> */}\n          </div>\n          {active === true &&\n            <div>\n              {(Math.floor((timer).toFixed() / 60)) % 60}:\n            {(timer).toFixed() % 60}\n            </div>}\n          {active === false &&\n            <div>\n              {(Math.floor((finalTime).toFixed() / 60)) % 60}:\n            {(finalTime).toFixed() % 60}\n            </div>}\n        </div>\n        <div className=\"card-body\">\n          <ul className=\"list-group\">\n            {productsArr && productsArr.map((el) => {\n              return (<ProductList el={el} key={el.product.productId} />)\n            })}\n          </ul>\n        </div>\n        <div className=\"input-group card-footer\">\n          <select data-testid={`name-${order.client}`} onChange={changeStatus} value={order.status} className=\"custom-select\" id=\"inputGroupSelect02\">\n            <option value=\"pending\">Pending</option>\n            <option value=\"canceled\">Canceled</option>\n            <option data-testid={`delivering-${order.client}`} value=\"delivering\">Delivering</option>\n            <option data-testid={`delivered-${order.client}`} value=\"delivered\">Delivered</option>\n          </select>\n          <div className=\"input-group-append\">\n            <label className=\"input-group-text\" htmlFor=\"inputGroupSelect02\">Status</label>\n          </div>\n        </div>\n      </div>\n    </div >\n  )\n}\n\nexport default OrderCard"]},"metadata":{},"sourceType":"module"}